# Список и детали

Создайте учебный проект на React с маршрутизацией и Redux‑Saga, который показывает список услуг и страницу деталей услуги. Проект **читает** данные с REST‑бэкенда и обрабатывает состояния загрузки и ошибок с возможностью повторить запрос.

## Цель задания

Закрепить работу с React Router, Redux (или RTK), Redux‑Saga (эффекты `call`, `put`, `takeLatest`), организацию асинхронных запросов, отображение состояний UI: «загрузка», «ошибка», «успех».

## API

Бэкенд уже подготовлен и лежит в каталоге `backend`.

* Список услуг: `GET http://localhost:7070/api/services`

  * Ответ: массив объектов `{ id, name, price }`.
* Детали услуги: `GET http://localhost:7070/api/services/:id`

  * Ответ: объект `{ id, name, price, content }` (состав может отличаться — ориентируйтесь на фактический бэкенд).

> Важно: для страницы деталей параметр `:id` берите из URL.

## Требования к функционалу

1. **Главная страница ("/")**

   * Отображает **список услуг** (имя и цена достаточно).

   * Каждая услуга — это **ссылка** на страницу деталей: `/:id/details`.

   * При первом открытии страницы должен отправляться запрос за списком.

   * Во время запроса показывается **индикатор загрузки**.

     ![](./assets/spinner.png)

   * При ошибке отображается **сообщение об ошибке** и кнопка **«Повторить запрос»**.

     ![](./assets/retry.png)

2. **Страница деталей ("/\:id/details")**

   * При монтировании запрашивает детали услуги по `:id`.
   * Во время запроса показывается **индикатор загрузки** (тот же спиннер).
   * При ошибке показывается сообщение и **кнопка «Повторить запрос»**; при клике — повторный запрос.
   * При успешной загрузке показываются поля (минимум): **название**, **цена**, **описание/контент**.

3. **Повтор запроса**

   * Кнопка «Повторить запрос» должна заново запускать соответствующую saga (для списка — запрос списка, для деталей — запрос деталей текущего `id`). Во время повтора снова виден индикатор загрузки.

4. **Маршрутизация**

   * Используйте **React Router**.
   * Минимум два маршрута: `/` и `/:id/details`.

5. **Состояния**

   * Для **каждого** из двух экранов хранить статусы **loading / error / data** отдельно (например, `services.list` и `services.details`).

6. **Redux‑Saga**

   * Для запросов использовать saga: эффекты `call`, `put`, `takeLatest`.
   * Обработать неуспешные HTTP‑статусы (бросайте ошибку при `!res.ok`).

## Требования к UI

* Индикатор загрузки — картинка `assets/spinner.png` (можно просто `<img>` по центру).
* Экран ошибки — как на макете `assets/retry.png`: текст ошибки + кнопка «Повторить запрос».
* Разрешается базовая стилизация (CSS/SCSS), без библиотек компонентов.

## Ограничения

* **Редактирования** и создания/удаления услуг нет — только чтение.
* Нельзя использовать сторонние менеджеры состояния/данных (SWR, React Query и пр.). Разрешены: Redux / @reduxjs/toolkit (по желанию), Redux‑Saga, React Router.

## Скрипты

* Запуск бэкенда: из каталога `backend` — см. README (`npm i` и `npm start`).
* Запуск фронтенда: `npm i`, затем `npm run dev` (Vite)

## Пример UX (референсы)

* `assets/spinner.png` — индикатор загрузки.
* `assets/retry.png` — пример отображения ошибки и кнопки «Повторить запрос».

## Чек‑лист самопроверки

### Архитектура

* [ ] В Store есть отдельные разделы для списка и для деталей (разные `loading/error/data`).
* [ ] Используются экшены `*Requested`, `*Succeeded`, `*Failed` для каждого типа запроса.
* [ ] Для каждого запроса применён эффект `takeLatest`.
* [ ] Ошибки и загрузка корректно сбрасываются при новом запросе.

### Маршруты и экраны

* [ ] На `/` отображается список услуг, каждая ведёт на `/:id/details`.
* [ ] На `/:id/details` загружаются и показываются данные выбранной услуги.
* [ ] При переходе на новую услугу данные обновляются.
* [ ] Нет форм редактирования — только чтение данных.

### UI‑состояния

* [ ] Во время загрузки на любой странице показывается спиннер (`spinner.png`).
* [ ] При ошибке отображается сообщение об ошибке и кнопка «Повторить запрос» (`retry.png`).
* [ ] При нажатии «Повторить запрос» отправляется новый HTTP‑запрос, снова показывается спиннер.
* [ ] В случае успешной загрузки спиннер и ошибка скрываются, показываются данные.

### Качество кода

* [ ] Код организован по папкам: `pages`, `components`, `store`.
* [ ] Повторяющаяся логика вынесена (например, компонент `Spinner`, компонент `ErrorView`).
* [ ] Нет дублирования кода в саге/редьюсере.
* [ ] Для сетевых запросов обрабатываются не‑200 ответы (`!res.ok`).
* [ ] Имена переменных и функций осмысленные, код читаемый.

### Дополнительные задания (по желанию)

* [ ] Подсветка активного пункта списка на странице деталей.
* [ ] Написаны тесты для саг или редьюсеров.